!function(t){"use strict";!function(){for(var t,e=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=i.length,n=window.console=window.console||{};o--;)t=i[o],n[t]||(n[t]=e)}(),function(t,e,i,o){function n(e,i){this._name=s,this.element=e,this.options=t.extend({},a,i),this.$element=t(e),this.$main_block=t(this.options.main_block),this.init()}var s="mental_menu_bar",a={always_show_after_threshold:t("body").hasClass("menu-bar-opened-big")&&!t("body").hasClass("menu-bar-ontop")&&!t("body").hasClass("menu-bar-push"),container_960_threshold:1300,container_1170_threshold:1300,load_closed_below:768,main_block:"#main"};n.prototype={init:function(){var o=this;this.current_threshold=t("body").hasClass("cont-960")?this.options.container_960_threshold:this.options.container_1170_threshold,this.$element.hover(function(){o.show()},function(){e.innerWidth<o.current_threshold&&o.hide()}),t("#main").hover(function(){(!o.options.always_show_after_threshold||e.innerWidth<o.current_threshold)&&o.hide()}),this.$element.find(".mb-toggler").click(function(t){t.preventDefault(),o.toggle()}),this.options.always_show_after_threshold&&t(e).resize(function(){e.innerWidth<o.current_threshold&&o.is_opened()?o.hide():e.innerWidth>o.current_threshold&&!o.is_opened()&&o.show()}).resize(),t(i).click(function(i){var n=o.$element;n.is(i.target)||0!==n.has(i.target).length||t(".mb-toggler").is(i.target)||0!==t(".mb-toggler").has(i.target).length||(!o.options.always_show_after_threshold||e.innerWidth<o.current_threshold)&&o.hide()}),t(e).load(function(){Modernizr.touch&&setTimeout(function(){o.hide()},1e3)}),e.innerWidth<this.options.load_closed_below&&this.is_opened()&&(this.sw_off_transitions(),o.hide(),setTimeout(function(){o.sw_on_transitions()},500))},hide:function(){t("body").removeClass("menu-bar-opened")},show:function(){t("body").addClass("menu-bar-opened")},toggle:function(){t("body").toggleClass("menu-bar-opened")},sw_off_transitions:function(){this.$main_block.css({"transition-property":"none","-moz-transition-property":"none","-webkit-transition-property":"none","-o-transition-property":"none"}),this.$element.css({"transition-property":"none","-moz-transition-property":"none","-webkit-transition-property":"none","-o-transition-property":"none"})},sw_on_transitions:function(){this.$main_block.css({"transition-property":"","-moz-transition-property":"","-webkit-transition-property":"","-o-transition-property":""}),this.$element.css({"transition-property":"","-moz-transition-property":"","-webkit-transition-property":"","-o-transition-property":""})},is_opened:function(){return t("body").hasClass("menu-bar-opened")}},t.fn[s]=function(e){var i=[].slice.call(arguments,1);return this.each(function(){t.data(this,"plugin_"+s)?t.isFunction(n.prototype[e])&&t.data(this,"plugin_"+s)[e].apply(t.data(this,"plugin_"+s),i):t.data(this,"plugin_"+s,new n(this,e))})}}(jQuery,window,document),function(t,e,i,o){function n(e,i){this.element=e,this.$element=t(e),this.options=t.extend({},a,i),this._name=s,this.init()}var s="mental_menu",a={easing:"easeOutBack",speed:"slow",accordion_type:!0};n.prototype={init:function(){var e=this;this.options.accordion_type=this.$element.find(">div").hasClass("menu-accordion-type")||this.$element.find(">div >ul").hasClass("menu-accordion-type"),this.$element.find("li:has(ul)").each(function(){t(this).append('<a class="submenu-toggler" href="#"><i class="fa fa-plus"></i></a>')}),this.$element.find(".submenu-toggler").click(function(i){i.preventDefault(),e.toggle_sub(t(this).closest("ul"),t(this).siblings("ul"),t(this).find("i.fa"))})},toggle_sub:function(t,e,i){i.hasClass("fa-plus")?i.removeClass("fa-plus").addClass("fa-minus"):i.removeClass("fa-minus").addClass("fa-plus"),e.slideToggle(this.options.speed,this.options.easing),this.options.accordion_type&&t.find("> li > ul").not(e).slideUp(this.options.speed,this.options.easing).closest("li").find("> a > i.fa").removeClass("fa-minus").addClass("fa-plus")}},t.fn[s]=function(e){var i=[].slice.call(arguments,1);return this.each(function(){t.data(this,"plugin_"+s)?t.isFunction(n.prototype[e])&&t.data(this,"plugin_"+s)[e].apply(t.data(this,"plugin_"+s),i):t.data(this,"plugin_"+s,new n(this,e))})}}(jQuery,window,document),function(t,e,i,o){function n(e,i){this.element=e,this.$element=t(e);var o=s(this.$element.data("options"));this.options=t.extend({},l,i),this.options=t.extend({},this.options,o),this.init()}function s(t){if(t===o)return[];var e=[];return t.split(";").forEach(function(t){var i=t.split(":");2==i.length&&(e[i[0].trim()]=i[1].trim())}),e}var a="mental_gallery",l={ajaxurl:mental_vars.ajaxurl||"/wp-admin/admin-ajax.php",category:"",type:"expanding",ajax_action:"mental_gallery",screen_sm:768,screen_md:992,screen_lg:1200,debug:!1,items_per_page:12,enable_ajax:"yes",url_hash:"yes"};n.prototype={init:function(){var i=this;if(!t.fn.isotope)return console.error("Mental gallery: Isotope is not loaded"),!1;if(this.options.items_per_page=parseInt(this.options.items_per_page),this.$gallery=this.$element,this.id=this.$gallery.attr("id"),this.$last_clicked_item=t(),this.columns=this.calc_columns(),this.$gallery_filters=t('.gallery-filters[data-gallery-id="'+this.id+'"]'),this.$load_more=t('a[data-gallery-id="'+this.id+'"]'),this.$load_more_onscroll=this.$gallery.next(".lmb-on-scroll"),this.$gallery.find(".gl-item.gl-hidden").removeClass("gl-hidden"),this.init_filters(),this.init_load_more(),"expanding"==this.options.type?(this.init_isotope_preview(),this.init_preview()):this.init_isotope_masonry(),t("#menu-bar").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){i.$gallery.isotope("layout")}),e.location.hash&&e.location.hash.startsWith("#filter:")){var o=this.$gallery_filters.find('[data-filter="'+e.location.hash.substring(e.location.hash.lastIndexOf(":")+1)+'"]');o.length&&this.filter_click(o)}},init_isotope_preview:function(){this.debug("init_isotope_preview"),this.refresh_items_order_data(),this.$gallery.isotope({itemSelector:".gl-item",resizable:!1,layoutMode:"masonry",sortBy:"custom",getSortData:{custom:function(e){return parseInt(t(e).attr("data-order"))}},filter:this.get_filter()}),this.process_images_load()},init_isotope_masonry:function(){this.debug("init_isotope_masonry"),this.$gallery.isotope({itemSelector:".gl-item",resizable:!1,layoutMode:"masonry",filter:this.get_filter()}),this.process_images_load()},init_filters:function(){this.debug("init_filters");var e=this;this.$gallery_filters.find("> li > a").each(function(){t(this).attr("data-visible",e.options.items_per_page)}),this.$gallery_filters.on("click","> li > a",function(i){i.preventDefault(),e.filter_click(t(this))})},init_load_more:function(){this.debug("init_load_more");var i=this;this.$load_more.on("click",function(t){t.preventDefault(),i.remove_preview(),i.load_more(i.$load_more.closest(".load-more-block"))}),this.$load_more_onscroll.length&&(t(e).scroll(this.scroll_event.bind(this)),setTimeout(function(){i.scroll_event()},500))},init_preview:function(){this.debug("init_preview");var i=this;this.$gallery.on("click",".gl-item:not(.gl-preview) > a",function(e){e.preventDefault();var o=t(this).parent();i.remove_preview(),i.$last_clicked_item.is(o)?i.$last_clicked_item=t():i.show_preview(o)}),this.$gallery.on("click",".glp-close",function(e){e.preventDefault(),i.remove_preview(),i.$last_clicked_item=t()}),t(e).resize(function(){i.columns=i.calc_columns(),i.update_all_previews()})},init_intense_zoom_image:function(t){this.debug("init_intense_zoom_image"),Intense!=o&&t.find(".glp-zoom").each(function(){Intense(this)})},scroll_event:function(){if(this.$load_more_onscroll.length&&!this.$load_more_onscroll.hasClass("loading")){var i=t(e).scrollTop()+t(e).height();i>this.$load_more_onscroll.offset().top&&this.load_more(this.$load_more_onscroll)}},get_filter:function(e){this.debug("get_filter");var i=this;"undefined"==typeof e&&(e=this.$gallery_filters.find("> li > a.active"));var o=parseInt(e.attr("data-visible")),n=e.attr("data-filter"),s=0;return function(){var a=t(this);if(a.hasClass("gl-preview"))return!0;if("no"===i.options.enable_ajax&&s>o-1)return!1;var l=a.data("category").toString().split(/[\s,]+/);return"*"==n||t.inArray(n,l)!==-1?(s++,e.attr("data-displayed",s),!0):void 0}},filter_click:function(t){var i=this,o=t.attr("data-filter");if(this.$gallery_filters.find("> li > a").removeClass("active"),t.addClass("active"),this.filter_items(t),"yes"===this.options.url_hash){var n=e.location;"pushState"in history?history.replaceState("","","*"===o?n.pathname+n.search:"#filter:"+o):n.hash="filter:"+o}if("no"===this.options.enable_ajax){var s=parseInt(t.attr("data-visible")),a=parseInt(t.attr("data-displayed"));s>a?(this.$load_more.closest(".load-more-block").addClass("no-more-items"),this.$load_more_onscroll.length&&this.$load_more_onscroll.addClass("no-more-items")):(this.$load_more.closest(".load-more-block").removeClass("no-more-items"),this.$load_more_onscroll.length&&this.$load_more_onscroll.removeClass("no-more-items")),setTimeout(function(){i.scroll_event()},500)}},filter_items:function(e){this.debug("filter_items"),"undefined"==typeof e&&(e=this.$gallery_filters.find("> li > a.active")),this.remove_preview(),this.$last_clicked_item=t(),this.$gallery.isotope({filter:this.get_filter(e)})},load_more:function(e){this.debug("load_more");var i=this;if(!e.hasClass("no-more-items")&&!e.hasClass("loading"))return e.addClass("loading"),"no"===this.options.enable_ajax?void setTimeout(function(){i.fake_load_more(e)},500):void t.ajax({type:"POST",url:i.options.ajaxurl,data:{action:i.options.ajax_action,offset:i.$gallery.find(".gl-item:not(.gl-preview)").length,options:i.options},success:function(o){var n=t("<div>"+o+"</div>").find(".gl-item");i.$gallery.append(n),i.refresh_items_order_data(),i.$gallery.isotope("appended",n),0==n.length&&e.addClass("no-more-items"),i.process_images_load()},complete:function(){e.removeClass("loading")},error:function(t,e){console.log(e)}})},fake_load_more:function(t){this.debug("fake_load_more");var e=this.$gallery_filters.find("> li > a.active"),i=parseInt(e.attr("data-visible"));i+=this.options.items_per_page,e.attr("data-visible",+i),this.filter_items(e);var o=parseInt(e.attr("data-displayed"));i>o&&t.addClass("no-more-items"),t.removeClass("loading")},calc_columns:function(){this.debug("calc_columns");var t=e.innerWidth<this.options.screen_sm?1:e.innerWidth<this.options.screen_md?2:e.innerWidth<this.options.screen_lg?3:this.$gallery.hasClass("gl-cols-3")?3:this.$gallery.hasClass("gl-cols-4")?4:this.$gallery.hasClass("gl-cols-5")?5:4;return t},process_images_load:function(){this.debug("process_images_load");var e=this;this.$gallery.find(".gl-loading img").one("load",function(){var i=t(this),o=new Image;o.src=i.attr("src"),o.onload=function(){var t=o.width/o.height;!isNaN(t)&&t<1&&i.addClass("img-vertical")},t(this).closest(".gl-loading").removeClass("gl-loading"),e.$gallery.isotope("layout")}).each(function(){this.complete&&t(this).load()})},refresh_items_order_data:function(){this.debug("refresh_items_order_data"),this.$gallery.find(".gl-item:not(.gl-preview):visible").each(function(){t(this).attr("data-order",10*(t(this).index()+1))})},scroll_to_preview:function(i){this.debug("scroll_to_preview"),setTimeout(function(){t("html, body").animate({scrollTop:i.offset().top-(e.innerHeight-i.outerHeight(!0))/2},500)},500)},remove_preview:function(){this.debug("remove_preview");var t=this.$gallery.find("> .gl-preview");t.length&&this.$gallery.isotope("remove",t).isotope("layout")},show_preview:function(t){var e=this,i=t.siblings(":not(.gl-preview):visible").andSelf().index(t),o=this.insert_preview(t,i);this.set_arrow(i,o),setTimeout(function(){e.$gallery.isotope("layout")},10),this.scroll_to_preview(o),this.carousel_fix(o.find(".carousel")),this.video_audio_init(o),this.init_intense_zoom_image(o),this.$last_clicked_item=t},update_all_previews:function(){this.debug("update_all_previews");var e=this;this.$gallery.find("> .gl-preview").each(function(){e.update_preview(t(this))}),this.$gallery.isotope("updateSortData").isotope({sortBy:"custom",filter:this.get_filter()})},update_preview:function(t){this.debug("update_preview");var e=t.data("item_index"),i=this.get_preview_order(e);t.attr("data-order",i),this.set_arrow(e,t)},get_preview_order:function(t){this.debug("get_preview_order");var e=Math.floor(t/this.columns),i=(e+1)*this.columns,o=this.$gallery.find("> .gl-item:not(.gl-preview):visible");i>o.length-1&&(i=o.length);var n=o.eq(i-1).data("order"),s=n+1;return s},insert_preview:function(i,o){this.debug("insert_preview");var n=this,s=i.find(".gl-preview"),a=this.get_preview_order(o),l=t('<li class="gl-item gl-preview" data-category="'+i.data("category")+'" data-order="'+a+'">'+s.html()+"</li>");return l.find("img").css({"max-height":e.innerHeight-45+"px"}),l.data("item_index",o),this.$gallery.append(l.show()),this.$gallery.isotope("appended",l).isotope({filter:this.get_filter()}),l.find("img").one("load",function(){n.$gallery.isotope("layout")}),l},set_arrow:function(t,e){this.debug("set_arrow");var i=Math.floor(t/this.columns),o=t-((i+1)*this.columns-this.columns);e.find(".glp-arrow").css({left:(o+1)*(100/this.columns)-100/this.columns/2+"%"})},carousel_fix:function(t){this.debug("carousel_fix");var e=t.attr("id")+"-a";t.attr("id",e),t.find(".carousel-control").attr("href","#"+e),t.find(".carousel-indicators li").attr("data-target","#"+e),t.carousel()},video_audio_init:function(e){this.debug("video_audio_init");var i={};"undefined"!=typeof _wpmejsSettings&&(i.pluginPath=_wpmejsSettings.pluginPath),t.fn.mediaelementplayer&&e.find(".wp-audio-shortcode-preview, .wp-video-shortcode-preview").mediaelementplayer(i),e.find(".wp-playlist-preview").each(function(){return t(this).addClass("wp-playlist"),new WPPlaylistView({el:this})})},debug:function(t){this.options.debug&&console.log(t)}},t.fn[a]=function(e){var i=[].slice.call(arguments,1);return this.each(function(){t.data(this,"plugin_"+a)?t.isFunction(n.prototype[e])&&t.data(this,"plugin_"+a)[e].apply(t.data(this,"plugin_"+a),i):t.data(this,"plugin_"+a,new n(this,e))})}}(jQuery,window,document),function(t,e,i,o){function n(e,i){this.element=e,this.$element=t(e);var o=s(this.$element.data("options"));this.options=t.extend({},l,i),this.options=t.extend({},this.options,o),this._name=a,this.init()}function s(t){if(t===o)return[];var e=[];return t.split(";").forEach(function(t){var i=t.split(":");2==i.length&&(e[i[0].trim()]=i[1].trim())}),e}var a="mental_blog",l={ajaxurl:mental_vars.ajaxurl||"/wp-admin/admin-ajax.php",type:"vertical"};n.prototype={init:function(){var e=this;return t.fn.isotope?("full"==this.options.type&&(this.options.type="vertical"),this.id=this.$element.attr("id"),this.$load_more_onscroll=this.$element.next(".lmb-on-scroll"),this.$load_more=t('a[data-blog-id="'+this.id+'"]'),this.$element.isotope({itemSelector:".isotope-item",resizable:!1,layoutMode:this.options.type,vertical:{horizontalAlignment:.5}}),this.init_load_more(),this.process_images_load(),void setTimeout(function(){e.$element.isotope("layout")},500)):(console.log("Mental_blog: Isotope is not loaded"),!1)},init_load_more:function(){var i=this;this.$load_more.on("click",function(t){t.preventDefault(),i.load_more(i.$load_more.closest(".load-more-block"))}),this.$load_more_onscroll.length&&t(e).scroll(function(){if(!i.$load_more_onscroll.hasClass("loading")){var o=t(e).scrollTop()+t(e).height();o>i.$load_more_onscroll.offset().top&&i.load_more(i.$load_more_onscroll)}})},load_more:function(e){var i=this;e.hasClass("no-more-items")||e.hasClass("loading")||(e.addClass("loading"),t.ajax({type:"POST",url:i.options.ajaxurl,data:{action:"mental_blog",offset:i.$element.find(".blog-item").length,options:i.options},success:function(o){var n=t("<div>"+o+"</div>").find(".blog-item"),s=i.$element.append(n).isotope("appended",n);s.imagesLoaded().progress(function(){s.isotope("layout")}),0==n.length&&e.addClass("no-more-items"),i.process_images_load(),i.carousel_init(n),i.video_audio_init(n)},complete:function(){e.removeClass("loading")},error:function(t,e){console.log(e)}}))},process_images_load:function(){var e=this;this.$element.find("img").one("load",function(){e.$element.isotope()}).each(function(){this.complete&&t(this).load()})},carousel_init:function(t){t.find(".carousel").carousel()},video_audio_init:function(e){var i={};"undefined"!=typeof _wpmejsSettings&&(i.pluginPath=_wpmejsSettings.pluginPath),t.fn.mediaelementplayer&&e.find(".wp-audio-shortcode, .wp-video-shortcode").mediaelementplayer(i),"undefined"!=typeof WPPlaylistView&&e.find(".wp-playlist").each(function(){return new WPPlaylistView({el:this})}),this.$element.isotope("layout")}},t.fn[a]=function(e){var i=[].slice.call(arguments,1);return this.each(function(){t.data(this,"plugin_"+a)?t.isFunction(n.prototype[e])&&t.data(this,"plugin_"+a)[e].apply(t.data(this,"plugin_"+a),i):t.data(this,"plugin_"+a,new n(this,e))})}}(jQuery,window,document),(window.onpopstate=function(){var t,e=/\+/g,i=/([^&=]+)=?([^&]*)/g,o=function(t){return decodeURIComponent(t.replace(e," "))},n=window.location.search.substring(1);for(window.urlParams={};t=i.exec(n);)urlParams[o(t[1])]=o(t[2])})()}(jQuery);